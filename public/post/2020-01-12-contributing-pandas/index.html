<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸° - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="olOwOlo" /><meta name="description" content="ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸°" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.79.0 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/2020-01-12-contributing-pandas/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.c7bc1becf36bcf6a9ebd25d2947e43a2eb745ddb0c9a32b43126fd7fa460c351.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸°" />
<meta property="og:description" content="ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸°" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/2020-01-12-contributing-pandas/" />
<meta property="article:published_time" content="2020-01-12T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-01-12T00:00:00+00:00" />
<meta itemprop="name" content="ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸°">
<meta itemprop="description" content="ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸°">
<meta itemprop="datePublished" content="2020-01-12T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-01-12T00:00:00+00:00" />
<meta itemprop="wordCount" content="4303">



<meta itemprop="keywords" content="Python," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸°"/>
<meta name="twitter:description" content="ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸°"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Even</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Even</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">ì˜¤í”ˆì†ŒìŠ¤ ë²„ê·¸ ê³ ì¹˜ë‹¤ê°€ CPythonê¹Œì§€ ëœ¯ì–´ë³¸ í›„ê¸°</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-01-12 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ë„ì…">ë„ì…</a></li>
        <li><a href="#-ë²„ê·¸-ì›ì¸-ë¶„ì„">ğŸ¤” ë²„ê·¸ ì›ì¸ ë¶„ì„</a></li>
      </ul>
    </li>
    <li><a href="#-ì½”ë“œ-í†ºì•„ë³´ê¸°">ğŸ” ì½”ë“œ í†ºì•„ë³´ê¸°</a>
      <ul>
        <li><a href="#-ë¬¸ì œ-í•´ê²°">ğŸ‘¨â€ğŸ’» ë¬¸ì œ í•´ê²°&hellip;?</a></li>
        <li><a href="#-í…ŒìŠ¤íŠ¸ë¥¼-ì§œì-ì ˆë§í¸">ğŸ’€ í…ŒìŠ¤íŠ¸ë¥¼ ì§œì (ì ˆë§í¸)</a></li>
        <li><a href="#-ì•ˆë…•-cpython">ğŸ– ì•ˆë…• CPython</a></li>
        <li><a href="#-í…ŒìŠ¤íŠ¸ë¥¼-ì§œì-í¬ë§í¸">âœ¨ í…ŒìŠ¤íŠ¸ë¥¼ ì§œì (í¬ë§í¸)</a></li>
        <li><a href="#-pr-ë³´ë‚´ê¸°">ğŸš€ PR ë³´ë‚´ê¸°</a></li>
        <li><a href="#ê²°ë¡ ">ê²°ë¡ </a>
          <ul>
            <li><a href="#reference">Reference</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><strong>TL;DR</strong></p>
<p>íŒŒì´ì¬ Pandas ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ë°œê²¬í•œ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ëŠ” ê³¼ì •ì—ì„œ,
cpythonì˜ ì½”ë“œë² ì´ìŠ¤ê¹Œì§€ ëœ¯ì–´ë³´ê²Œ ëœ ì´ì•¼ê¸°ì…ë‹ˆë‹¤.</p>
<blockquote>
<p>ì´ ê¸€ì€ ì˜¤í”ˆ ì†ŒìŠ¤ ì»¨íŠ¸ë¦¬ë·°ì…˜ ê°€ì´ë“œê°€ ì•„ë‹™ë‹ˆë‹¤.</p>
</blockquote>
<h2 id="ë„ì…">ë„ì…</h2>
<p>ì–¼ë§ˆ ì „, íŒŒì´ì¬ ë°ì´í„° ê³¼í•™ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ <a href="https://pandas.pydata.org/">Pandas</a>ë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ json ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ëŠ” <code>read_json</code> í•¨ìˆ˜ê°€ ì˜ì•„í•œ ë™ì‘ì„ í•˜ëŠ” ê²ƒì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c1"># utf-8 ì¸ì½”ë”©ìœ¼ë¡œ íŒŒì¼ì„ ì €ì¥í•˜ê³ </span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&#34;A&#34;: [&#34;ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬&#34;]}&#39;</span><span class="p">)</span>

<span class="c1"># read_json() í•¨ìˆ˜ë¡œ ì½ì–´ì˜µë‹ˆë‹¤</span>
<span class="n">dt2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">dt2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">               A
0  åª›ï¿½ï¿½êµ¹ï¿½ë–ï¿½ì”ªï§ëˆì»®ï¿½ê¶—
</code></pre></td></tr></table>
</div>
</div><p><code>read_json</code> í•¨ìˆ˜ëŠ” json íŒŒì¼ì„ ì½ì–´ì„œ íŒŒì‹±í•´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ”ë°, utf-8ë¡œ ì €ì¥í•œ íŒŒì¼ì„ ì½ì–´ì™”ì„ ë•Œ ê²°ê³¼ë¬¼ì´ ê¹¨ì§€ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<p>íŒŒì´ì¬ì˜ ì¸ì½”ë”© ë¬¸ì œì— ì§€ê¸‹ì§€ê¸‹í•˜ê²Œ ë‹¹í•´ë³¸ ë¶„ë“¤ì´ë¼ë©´, íŒŒì´ì¬ì—ì„œ ì¸ì½”ë”©ì´ ê¹¨ì§€ëŠ” ê±´ í”íˆ ìˆëŠ” ì¼ ì•„ë‹Œê°€? ë¼ê³  ìƒê°í•˜ì‹¤ ìˆ˜ë„ ìˆì§€ë§Œ,
<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_json.html">ê³µì‹ ë‹¤íë¨¼íŠ¸</a>ì— ë”°ë¥´ë©´ <code>read_json</code>ì€ ê¸°ë³¸ì ìœ¼ë¡œ íŒŒì¼ì˜ ì¸ì½”ë”©ì„ utf-8ë¡œ ì·¨ê¸‰í•©ë‹ˆë‹¤.</p>
<p><img src="../../../assets/post_images/pandas_read_json_encoding.PNG" alt="read_json_docs"></p>
<p>ê·¸ëŸ¼ íŒŒì¼ì˜ ì¸ì½”ë”©ì„ utf-8ë¡œ ëª…ì‹œí•´ì£¼ë©´ ì–´ë–¨ê¹Œìš”?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&#34;A&#34;: [&#34;ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬&#34;]}&#39;</span><span class="p">)</span>
<span class="n">dt2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>  <span class="c1"># encoding íŒŒë¼ë¯¸í„° ì§€ì •</span>
<span class="k">print</span><span class="p">(</span><span class="n">dt2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">         A
0  ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬
</code></pre></td></tr></table>
</div>
</div><p>ì œëŒ€ë¡œ ê¹¨ì§€ì§€ ì•Šê³  íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì¦‰, ì½”ë“œê°€ ê³µì‹ ë¬¸ì„œëŒ€ë¡œ ë™ì‘í•˜ê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ë²„ê·¸ì…ë‹ˆë‹¤.</p>
<h2 id="-ë²„ê·¸-ì›ì¸-ë¶„ì„">ğŸ¤” ë²„ê·¸ ì›ì¸ ë¶„ì„</h2>
<p>ë²„ê·¸ë¥¼ ë°œê²¬í–ˆìœ¼ë‹ˆ ë¨¼ì € ì´ìœ ë¥¼ ë¶„ì„í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ì¸ì½”ë”©ì´ ê¹¨ì§€ëŠ” ê²ƒì€ ë¶„ëª… ì œ ê°œë°œí™˜ê²½ì´ í•œêµ­ì–´ ìœˆë„ìš°ì¦ˆë¼ cp949 ì¸ì½”ë”©ì„ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì¼ ê²ƒì…ë‹ˆë‹¤. í™•ì¸í•´ë³¼ê¹Œìš”?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c1"># íŒŒì¼ì„ utf-8 ëŒ€ì‹  cp949 ì¸ì½”ë”©ìœ¼ë¡œ ì €ì¥</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;cp949&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&#34;A&#34;: [&#34;ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬&#34;]}&#39;</span><span class="p">)</span>
<span class="n">dt2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">dt2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">         A
0  ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬
</code></pre></td></tr></table>
</div>
</div><p>ì˜ˆìƒëŒ€ë¡œ json íŒŒì¼ì„ cp949 ì¸ì½”ë”©ìœ¼ë¡œ ì €ì¥í•˜ë©´ ì œëŒ€ë¡œ ë‚´ìš©ì„ ì½ì–´ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ Pandas ê°œë°œíŒ€ì— ë²„ê·¸ ë¦¬í¬íŠ¸ë¥¼ í•˜ê³  ëë‚´ê² ìŠµë‹ˆë‹¤. ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤.</p>
<p>&hellip;ë¼ê³  í•˜ê³  ì‹¶ì§€ë§Œ ì§ì ‘ ë¬¸ì œì˜ ì›ì¸ì„ íŒŒì•…í•˜ê³  ê³ ì³ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤ (ë‹µë‹µí•˜ë‹ˆ ë‚´ê°€ ë›´ë‹¤!).</p>
<p>ë¨¼ì € Pandasê°€ ì–´ë””ì„œ ì¸ì½”ë”©ì„ ì˜ëª» ì½ì–´ì˜¤ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤. <a href="https://github.com/pandas-dev/pandas">Pandas ì½”ë“œë² ì´ìŠ¤</a>ë¥¼ ëœ¯ì–´ë³¼ ì‹œê°„ì…ë‹ˆë‹¤.</p>
<h1 id="-ì½”ë“œ-í†ºì•„ë³´ê¸°">ğŸ” ì½”ë“œ í†ºì•„ë³´ê¸°</h1>
<p>ë¨¼ì € <code>read_json</code> í•¨ìˆ˜ë¥¼ ì°¾ì•„ë´…ì‹œë‹¤.</p>
<p><code>read_json</code> í•¨ìˆ˜ëŠ” <a href="https://github.com/pandas-dev/pandas/blob/794a1c21cfcbadd7a36653d9c8184868442be35b/pandas/io/json/_json.py#L352">io/json/_json.py</a> íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># https://github.com/pandas-dev/pandas/blob/794a1c21cfcbadd7a36653d9c8184868442be35b/pandas/io/json/_json.py#L352</span>
<span class="k">def</span> <span class="nf">read_json</span><span class="p">(</span>
    <span class="c1">#...</span>
    <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
    <span class="c1">#...</span>
<span class="p">):</span>
</code></pre></td></tr></table>
</div>
</div><p>ì¸ì½”ë”©ì˜ ê¸°ë³¸ ê°’ì€ <code>None</code>ì´ë„¤ìš”. ë” ë”°ë¼ê°€ ë´…ì‹œë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># https://github.com/pandas-dev/pandas/blob/794a1c21cfcbadd7a36653d9c8184868442be35b/pandas/io/json/_json.py#L586</span>
    <span class="n">json_reader</span> <span class="o">=</span> <span class="n">JsonReader</span><span class="p">(</span>
        <span class="c1">#...</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span>
        <span class="c1">#...</span>
    <span class="p">)</span>

    <span class="c1">#...</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">json_reader</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="c1">#...</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></td></tr></table>
</div>
</div><p><code>read_json</code>í•¨ìˆ˜ëŠ” <code>JsonReader</code> ë¼ëŠ” í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ì„œ íŒŒì¼ì„ ì½ì€ ë’¤ ê²°ê³¼ë¥¼ ëŒë ¤ì£¼ê²Œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># https://github.com/pandas-dev/pandas/blob/794a1c21cfcbadd7a36653d9c8184868442be35b/pandas/io/json/_json.py#L613</span>
<span class="k">class</span> <span class="nc">JsonReader</span><span class="p">(</span><span class="n">BaseIterator</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
        <span class="c1">#...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="n">encoding</span>  <span class="c1"># ì¸ì½”ë”© ì§€ì •</span>
        <span class="c1">#...</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_from_filepath</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">)</span>  <span class="c1"># íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì •ë˜ëŠ” ë©”ì†Œë“œ</span>
        <span class="c1">#...</span>

    <span class="c1">#...</span>
    <span class="k">def</span> <span class="nf">_get_data_from_filepath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath_or_buffer</span><span class="p">):</span>
        <span class="c1">#...</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">_get_handle</span><span class="p">(</span> <span class="c1"># íŒŒì¼ í¬ì¸í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì •ë˜ëŠ” ë©”ì†Œë“œ</span>
                <span class="n">filepath_or_buffer</span><span class="p">,</span>
                <span class="s2">&#34;r&#34;</span><span class="p">,</span>
                <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">,</span>
                <span class="n">compression</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compression</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="c1">#...</span>

        <span class="k">return</span> <span class="n">data</span>
</code></pre></td></tr></table>
</div>
</div><p><code>JsonReader</code>ëŠ” <code>__init__ --&gt; _get_data_from_filepath</code>ì„ ê±°ì³ <code>_get_handle</code> ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.</p>
<p>ë©”ì†Œë“œì˜ ì´ë¦„ìœ¼ë¡œ ë³´ê±´ëŒ€ íŒŒì¼ í¬ì¸í„°ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p>
<p><code>_get_handle</code>í•¨ìˆ˜ëŠ” <a href="https://github.com/pandas-dev/pandas/blob/794a1c21cfcbadd7a36653d9c8184868442be35b/pandas/io/common.py#L367">io/common.py</a> íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># https://github.com/pandas-dev/pandas/blob/794a1c21cfcbadd7a36653d9c8184868442be35b/pandas/io/common.py#L367</span>
<span class="k">def</span> <span class="nf">_get_handle</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="c1">#...</span>
            <span class="c1"># No explicit encoding</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path_or_buf</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&#34;replace&#34;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
    <span class="c1">#...</span>
    <span class="k">return</span> <span class="n">f</span><span class="p">,</span> <span class="n">handles</span>
</code></pre></td></tr></table>
</div>
</div><p><code>_get_handle</code> í•¨ìˆ˜ì—ì„œ íŒŒì¼ì„ ì—¬ëŠ”ë°, ì¸ì½”ë”©ì´ ëª…ì‹œë˜ì–´ ìˆì§€ ì•Šì„ ê²½ìš°, <code>open</code> í•¨ìˆ˜ì˜ ì¸ì½”ë”© íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì •í•˜ì§€ ì•Šê³  ì‚¬ìš©í•˜ë„¤ìš”.</p>
<p>ì´ ë¶€ë¶„ì´ ë¬¸ì œì¸ ê±¸ê¹Œìš”? í™•ì¸í•´ë´…ì‹œë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&#34;A&#34;: [&#34;ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬&#34;]}&#39;</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">,</span> <span class="s2">&#34;r&#34;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&#34;replace&#34;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{&#34;A&#34;: [&#34;åª›ï¿½ï¿½êµ¹ï¿½ë–ï¿½ì”ªï§ëˆì»®ï¿½ê¶—&#34;]}
</code></pre></td></tr></table>
</div>
</div><p><code>_get_handle</code> í•¨ìˆ˜ì™€ ë™ì¼í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì¤˜ì„œ íŒŒì¼ì„ ì—´ê³  ì½ì–´ ì¶œë ¥í•´ë³´ë‹ˆ,
ì•ì„œ <code>read_json</code>ìœ¼ë¡œ ì½ì—ˆì„ ë•Œì™€ ë™ì¼í•˜ê²Œ ê¹¨ì§„ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ë ‡ìŠµë‹ˆë‹¤. ë¬¸ì œëŠ” <code>open</code>ì—ì„œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p><code>open</code>ì˜ ë™ì‘ì´ ë¬¸ì œë¼ë©´ ë¬¸ì œëŠ” Pandasê°€ ì•„ë‹ˆë¼ íŒŒì´ì¬ì˜ ì˜ì—­ì…ë‹ˆë‹¤.</p>
<p><a href="https://docs.python.org/3.8/library/functions.html#open">íŒŒì´ì¬ ê³µì‹ ë¬¸ì„œ</a>ì—ì„œ <code>open</code> í•¨ìˆ˜ì— ëŒ€í•œ ë‚´ìš©ì„ ì°¾ì•„ë³´ë©´,</p>
<blockquote>
<p>In text mode, if encoding is not specified the encoding used is platform dependent: <strong>locale.getpreferredencoding(False)</strong> is called to get the current locale encoding.</p>
</blockquote>
<p>ì¸ì½”ë”©ì´ ì§€ì •ë˜ì–´ ìˆì§€ ì•Šì„ ê²½ìš° <code>locale.getpreferredencoding(False)</code>ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì‚¬ìš©í•œë‹¤ê³  í•©ë‹ˆë‹¤.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">locale</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">locale</span><span class="o">.</span><span class="n">getpreferredencoding</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="s1">&#39;cp949&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>ì œ í•œêµ­ì–´ Windows10 í™˜ê²½ì—ì„œ <code>locale.getpreferredencoding(False)</code>ì˜ ê²°ê³¼ëŠ” cp949ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="-ë¬¸ì œ-í•´ê²°">ğŸ‘¨â€ğŸ’» ë¬¸ì œ í•´ê²°&hellip;?</h2>
<p>ì½”ë“œë² ì´ìŠ¤ë¥¼ ê¹Šì´ ë“¤ì–´ê°€ì„œì•¼ ë°œê²¬í•œ ë¬¸ì œì˜ ì›ì¸ì— ë¹„í•´ì„œ, í•´ê²°ì±…ì€ ì•„ì£¼ ê°„ë‹¨í•©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># https://github.com/pandas-dev/pandas/blob/fd7db9819b8c7dba86b2887bee33f670b2715afc/pandas/io/json/_json.py#L577</span>
    <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&#34;utf-8&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>ì¸ì½”ë”©ì´ ì§€ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ utf-8ë¡œ ê°•ì œí•´ì£¼ëŠ” ê²ƒì´ì£ .</p>
<p>ê¸°ì¡´ Pandas ì½”ë“œë² ì´ìŠ¤ì—ì„œë„ ëª…ì‹œë˜ì§€ ì•Šì€ ì¸ì½”ë”©ì„ ê°•ì œí•œ ì¼€ì´ìŠ¤ë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ìˆì—ˆê³  (<a href="https://github.com/pandas-dev/pandas/blob/fd7db9819b8c7dba86b2887bee33f670b2715afc/pandas/io/formats/format.py#L489-L490">ì˜ˆì‹œ1</a>, <a href="https://github.com/pandas-dev/pandas/blob/fd7db9819b8c7dba86b2887bee33f670b2715afc/pandas/io/formats/csvs.py#L77-L78">ì˜ˆì‹œ2</a>),
ë™ì¼í•œ ë°©ì‹ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì´ê²ƒìœ¼ë¡œ ëì¼ê¹Œìš”? ì•„ë‹™ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ê°€ ë‚¨ì•˜ìŠµë‹ˆë‹¤.</p>
<h2 id="-í…ŒìŠ¤íŠ¸ë¥¼-ì§œì-ì ˆë§í¸">ğŸ’€ í…ŒìŠ¤íŠ¸ë¥¼ ì§œì (ì ˆë§í¸)</h2>
<p>PandasëŠ” ì½”ë“œ í’ˆì§ˆì„ ìœ ì§€í•˜ê¸° ìœ„í•˜ì—¬ ì½”ë“œ ìˆ˜ì • PRì— í…ŒìŠ¤íŠ¸ë¥¼ ê°•ì œí•©ë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ê°€ ìˆ˜ì •í•œ ë²„ê·¸ëŠ”, <code>read_json</code>ì´ utf-8ì´ ì•„ë‹Œ ì˜ëª»ëœ ì¸ì½”ë”©ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ì—ˆìœ¼ë‹ˆ,
ê¸°ì¡´ ì½”ë“œì—ì„œëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ê³ , ìˆ˜ì •í•œ ì½”ë“œì—ì„œëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ê·¸ëŸ°ë° <code>locale.getpreferredencoding(False)</code>ì€ ì‹œìŠ¤í…œì— ë”°ë¼ ë‹¤ë¥¸ ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤.
ìœˆë„ìš°ì¦ˆë¼ë„ êµ­ê°€ì— ë”°ë¼ ë‹¤ë¥´ê³ , ìš°ë¶„íˆ¬ë‚˜ ë§¥ì—ì„œëŠ” utf-8ë¡œ ê³ ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ì¦‰, ì œëŒ€ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë ¤ë©´ ê¸°ë³¸ ì¸ì½”ë”©ì´ utf-8ì´ ì•„ë‹Œ í™˜ê²½ì„ ì‹œë®¬ë ˆì´ì…˜ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
ì•ˆ ê·¸ëŸ¬ë©´ ìš°ë¶„íˆ¬ì—ì„œëŠ” ì„±ê³µí•˜ê³  ìœˆë„ìš°ì¦ˆì—ì„œëŠ” ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ê°€ ë˜ì–´ë²„ë¦´ ìˆ˜ë„ ìˆìœ¼ë‹ˆê¹Œìš”.</p>
<p>íŒŒì´ì¬ ë¹ŒíŠ¸ì¸ ëª¨ë“ˆì¸ <code>unittest</code>ì˜ <code>mock</code> ëª¨ë“ˆì„ ì´ìš©í•´ì„œ <code>locale.getpreferredencoding</code> í•¨ìˆ˜ì˜ ë¦¬í„´ ê°’ì„ íŒ¨ì¹˜í•´ë´…ì‹œë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">locale</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">mock</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;OS:&#34;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Locale:&#34;</span><span class="p">,</span> <span class="n">locale</span><span class="o">.</span><span class="n">getpreferredencoding</span><span class="p">(</span><span class="bp">False</span><span class="p">))</span>

<span class="c1"># íŒŒì¼ì€ utf-8ë¡œ ì €ì¥</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&#34;A&#34;: [&#34;ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬&#34;]}&#39;</span><span class="p">)</span>

<span class="c1"># unittest.mock í•¨ìˆ˜ë¥¼ ì´ìš©í•œ í•¨ìˆ˜ íŒ¨ì¹­ (utf-8 --&gt; cp949)</span>
<span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s2">&#34;locale.getpreferredencoding&#34;</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="s2">&#34;cp949&#34;</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Patched locale:&#34;</span><span class="p">,</span> <span class="n">locale</span><span class="o">.</span><span class="n">getpreferredencoding</span><span class="p">(</span><span class="bp">False</span><span class="p">))</span>
    <span class="n">dt2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">)</span> <span class="c1"># cp949ë¡œ ê¸°ë³¸ ì¸ì½”ë”©ì„ ë°”ê¾¸ì—ˆìœ¼ë‹ˆ ê¹¨ì ¸ì•¼ í•œë‹¤.</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dt2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">OS: linux
Locale: UTF-8
Patched locale: cp949
         A
0  ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬
</code></pre></td></tr></table>
</div>
</div><p>í…ŒìŠ¤íŠ¸ëŠ” ê¸°ë³¸ localeì´ utf-8ì¸ ìš°ë¶„íˆ¬ í™˜ê²½ì—ì„œ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ëŸ°ë° ì–´ë¼? <code>mock.patch</code>ë¥¼ ì´ìš©í•´ì„œ <code>locale.getpreferredencoding</code>í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì´ cp949ë¡œ ë°”ë€ ê²ƒì„ í™•ì¸í–ˆìŒì—ë„,
<code>read_json</code>ì€ ì •ìƒì ìœ¼ë¡œ utf-8 ì¸ì½”ë”© íŒŒì¼ì„ ì½ì–´ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="-ì•ˆë…•-cpython">ğŸ– ì•ˆë…• CPython</h2>
<p>ì—¬ê¸°ì„œ ê½¤ ì˜¤ëœ ì‹œê°„ ì œìë¦¬ê±¸ìŒì„ í–ˆìŠµë‹ˆë‹¤. ëŒ€ì²´ ì–´ë””ê°€ ë¬¸ì œì¸ ê²ƒì¼ê¹Œìš”.</p>
<p>ê·¸ëŸ¬ë‹¤ ë¬¸ë“ í•œ ê°€ì§€ ê°€ëŠ¥ì„±ì„ ë– ì˜¬ë ¸ìŠµë‹ˆë‹¤. ê³¼ì—° íŒŒì´ì¬ ê³µì‹ ë¬¸ì„œëŠ” 100% ì •í™•í• ê¹Œ?</p>
<blockquote>
<p>ì •ë§ë¡œ <code>open</code> í•¨ìˆ˜ê°€ <code>locale.getpreferredencoding(False)</code>ì˜ ê²°ê³¼ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì¼ê¹Œ?</p>
</blockquote>
<p>ì´ ì§ˆë¬¸ì˜ ë‹µì€ ë¬¸ì„œì—ì„œëŠ” í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§ì ‘ íŒŒì´ì¬ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì½ì–´ë´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>cpython ë ˆí¬ì§€í† ë¦¬ì—ì„œ <code>open</code> í•¨ìˆ˜ë¥¼ í™•ì¸í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">// https://github.com/python/cpython/blob/d0c92e81aa2171228a23cb2bed36f7dab975257d/Modules/_io/_iomodule.c#L228
</span><span class="c1">// Cpython open() í•¨ìˆ˜ êµ¬í˜„ì²´
</span><span class="c1"></span><span class="k">static</span> <span class="n">PyObject</span> <span class="o">*</span>
<span class="nf">_io_open_impl</span><span class="p">(</span><span class="n">PyObject</span> <span class="o">*</span><span class="n">module</span><span class="p">,</span> <span class="n">PyObject</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">mode</span><span class="p">,</span>
              <span class="kt">int</span> <span class="n">buffering</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">encoding</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">errors</span><span class="p">,</span>
              <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">newline</span><span class="p">,</span> <span class="kt">int</span> <span class="n">closefd</span><span class="p">,</span> <span class="n">PyObject</span> <span class="o">*</span><span class="n">opener</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>    <span class="cm">/* wraps into a TextIOWrapper */</span>
    <span class="n">wrapper</span> <span class="o">=</span> <span class="n">PyObject_CallFunction</span><span class="p">((</span><span class="n">PyObject</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">PyTextIOWrapper_Type</span><span class="p">,</span> <span class="c1">// PyTextIOWrapper_Type í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤
</span><span class="c1"></span>                                    <span class="s">&#34;OsssO&#34;</span><span class="p">,</span>
                                    <span class="n">buffer</span><span class="p">,</span>
                                    <span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">newline</span><span class="p">,</span>
                                    <span class="n">line_buffering</span> <span class="o">?</span> <span class="nl">Py_True</span> <span class="p">:</span> <span class="n">Py_False</span><span class="p">);</span>
    <span class="c1">//...
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>open</code> í•¨ìˆ˜ëŠ” <code>PyTextIOWrapper_Type</code> í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ íŒŒì¼ì„ ì½ì–´ë“¤ì´ê³ ,</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">// https://github.com/python/cpython/blob/d0c92e81aa2171228a23cb2bed36f7dab975257d/Modules/_io/textio.c#L1071
</span><span class="c1">// PyTextIOWrapper_Type í´ë˜ìŠ¤ ìƒì„±ì êµ¬í˜„ì²´
</span><span class="c1"></span><span class="k">static</span> <span class="kt">int</span>
<span class="nf">_io_TextIOWrapper___init___impl</span><span class="p">(</span><span class="n">textio</span> <span class="o">*</span><span class="n">self</span><span class="p">,</span> <span class="n">PyObject</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
                                <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">encoding</span><span class="p">,</span> <span class="n">PyObject</span> <span class="o">*</span><span class="n">errors</span><span class="p">,</span>
                                <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">newline</span><span class="p">,</span> <span class="kt">int</span> <span class="n">line_buffering</span><span class="p">,</span>
                                <span class="kt">int</span> <span class="n">write_through</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">encoding</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">self</span><span class="o">-&gt;</span><span class="n">encoding</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// _PyIO_get_locale_moduleë¡œ ëª¨ë“ˆì„ ì½ì–´ì™€ì„œ
</span><span class="c1"></span>        <span class="n">PyObject</span> <span class="o">*</span><span class="n">locale_module</span> <span class="o">=</span> <span class="n">_PyIO_get_locale_module</span><span class="p">(</span><span class="n">state</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">locale_module</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="k">goto</span> <span class="n">catch_ImportError</span><span class="p">;</span>
        <span class="n">self</span><span class="o">-&gt;</span><span class="n">encoding</span> <span class="o">=</span> <span class="n">_PyObject_CallMethodIdOneArg</span><span class="p">(</span>
            <span class="c1">// ëª¨ë“ˆì˜ PyId_getpreferredencoding í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì¸ì½”ë”©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤
</span><span class="c1"></span>            <span class="n">locale_module</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PyId_getpreferredencoding</span><span class="p">,</span> <span class="n">Py_False</span><span class="p">);</span>
        <span class="c1">//...
</span><span class="c1"></span>    <span class="p">}</span>
    <span class="c1">//...
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>PyTextIOWrapper_Type</code>ì€ <code>_PyIO_get_locale_module</code>ë¡œ ë¡œì¼€ì¼ ëª¨ë“ˆì„ ê°€ì§€ê³  ì™€ì„œ,
<code>PyId_getpreferredencoding</code>ì„ í˜¸ì¶œí•˜ì—¬ ì¸ì½”ë”©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">// https://github.com/python/cpython/blob/d0c92e81aa2171228a23cb2bed36f7dab975257d/Modules/_io/_iomodule.c#L571
</span><span class="c1"></span><span class="n">PyObject</span> <span class="o">*</span>
<span class="nf">_PyIO_get_locale_module</span><span class="p">(</span><span class="n">_PyIO_State</span> <span class="o">*</span><span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//...
</span><span class="c1"></span>    <span class="c1">// _booltlocale ì´ë¼ëŠ” ì´ë¦„ì˜ ëª¨ë“ˆì„ ì„í¬íŠ¸í•´ì˜µë‹ˆë‹¤
</span><span class="c1"></span>    <span class="n">mod</span> <span class="o">=</span> <span class="n">PyImport_ImportModule</span><span class="p">(</span><span class="s">&#34;_bootlocale&#34;</span><span class="p">);</span>
    <span class="c1">//...
</span><span class="c1"></span>    <span class="k">return</span> <span class="n">mod</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>_PyIO_get_locale_module</code>ì€ <code>_bootlocale</code>ì´ë¼ëŠ” ì´ë¦„ì˜ íŒŒì´ì¬ ëª¨ë“ˆì„ ê°€ì§€ê³  ì˜¤ë„¤ìš”.</p>
<p>ëŒ€ì²´ <code>_bootlocale</code> ì´ë…€ì„ì€ ë­˜ê¹Œìš”? ì‚¬ì‹¤ ë‹µì€ íŒŒì´ì¬ <code>locale</code> ëª¨ë“ˆì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># https://github.com/python/cpython/blob/d0c92e81aa2171228a23cb2bed36f7dab975257d/Lib/locale.py#L622</span>
    <span class="c1"># locale.getpreferredencoding() êµ¬í˜„ì²´</span>
    <span class="k">def</span> <span class="nf">getpreferredencoding</span><span class="p">(</span><span class="n">do_setlocale</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;Return the charset that the user is likely using.&#34;&#34;&#34;</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">utf8_mode</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;UTF-8&#39;</span>
        <span class="kn">import</span> <span class="nn">_bootlocale</span>
        <span class="k">return</span> <span class="n">_bootlocale</span><span class="o">.</span><span class="n">getpreferredencoding</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ì‚¬ì‹¤ <code>locale.getpreferredencoding</code>ì€ <code>_bootlocale.getpreferredencoding</code>ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™€ ì“°ê³  ìˆì—ˆì„ ë¿ì…ë‹ˆë‹¤! <sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></p>
<p>ê·¸ë¦¬ê³  <code>_bootlocale</code> ëª¨ë“ˆì—ëŠ” ì§„ì§œ <code>getpreferredencoding</code>ì´ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># https://github.com/python/cpython/blob/d0c92e81aa2171228a23cb2bed36f7dab975257d/Lib/_bootlocale.py</span>
    <span class="k">def</span> <span class="nf">getpreferredencoding</span><span class="p">(</span><span class="n">do_setlocale</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">utf8_mode</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;UTF-8&#39;</span>
        <span class="k">return</span> <span class="n">_locale</span><span class="o">.</span><span class="n">_getdefaultlocale</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="c1">#...</span>
</code></pre></td></tr></table>
</div>
</div><p>ì¦‰, ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ol>
<li>íŒŒì´ì¬ì˜ <code>locale.getpreferredencoding</code> í•¨ìˆ˜ëŠ” <code>_bootlocale.getpreferredencoding</code> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¡œì¼€ì¼ ê°’ì„ ì–»ì–´ì˜¨ë‹¤.</li>
<li>ê·¸ëŸ¬ë‚˜ íŒŒì´ì¬ì˜ Cë¡œ êµ¬í˜„ëœ ë¹ŒíŠ¸ì¸ <code>open</code> í•¨ìˆ˜ëŠ” ì‚¬ì‹¤ <code>locale</code> ëª¨ë“ˆì„ ê±°ì¹˜ì§€ ì•Šê³  ì§ì ‘ <code>_bootlocale</code> ëª¨ë“ˆì„ ì„í¬íŠ¸í•´ì˜¨ë‹¤.</li>
<li>ë”°ë¼ì„œ <code>locale.getpreferredencoding</code> í•¨ìˆ˜ë¥¼ íŒ¨ì¹˜í•˜ëŠ” ê²ƒì€ <code>open</code> í•¨ìˆ˜ì˜ ë™ì‘ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šì•˜ë‹¤.</li>
<li>ê·¸ë ‡ë‹¤ë©´ <strong>_bootlocale</strong> ëª¨ë“ˆì„ ë°”ë¡œ íŒ¨ì¹˜í•˜ë©´ <code>open</code>ì˜ ë™ì‘ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆë‹¤!</li>
</ol>
<blockquote>
<p>ë‚˜ì¤‘ì— í™•ì¸í•˜ê¸°ë¡œ, <a href="https://bugs.python.org/issue31565">íŒŒì´ì¬ ì´ìŠˆ íŠ¸ë˜ì»¤ì—ë„ 2017ë…„ì— í•´ë‹¹ ë‚´ìš©ì´ ë“±ë¡</a>ëœ ë°” ìˆìŠµë‹ˆë‹¤. <br> ê·¸ë ‡ì§€ë§Œ ê°œë°œìë“¤ì´ ë°˜ì‘í•´ì£¼ì§€ ì•Šì•˜ë„¤ìš”. ğŸ™</p>
</blockquote>
<h2 id="-í…ŒìŠ¤íŠ¸ë¥¼-ì§œì-í¬ë§í¸">âœ¨ í…ŒìŠ¤íŠ¸ë¥¼ ì§œì (í¬ë§í¸)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">locale</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">mock</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;OS:&#34;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Locale:&#34;</span><span class="p">,</span> <span class="n">locale</span><span class="o">.</span><span class="n">getpreferredencoding</span><span class="p">(</span><span class="bp">False</span><span class="p">))</span>

<span class="c1"># íŒŒì¼ì€ utf-8 ì¸ì½”ë”©ìœ¼ë¡œ ì €ì¥</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&#34;A&#34;: [&#34;ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬&#34;]}&#39;</span><span class="p">)</span>

<span class="c1"># locale.getpreferredencoding ëŒ€ì‹  _bootlocale.getpreferredencoding íŒ¨ì¹˜</span>
<span class="k">with</span> <span class="n">mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s2">&#34;_bootlocale.getpreferredencoding&#34;</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="s2">&#34;cp949&#34;</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Patched locale:&#34;</span><span class="p">,</span> <span class="n">locale</span><span class="o">.</span><span class="n">getpreferredencoding</span><span class="p">(</span><span class="bp">False</span><span class="p">))</span>
    <span class="n">dt2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&#34;test.json&#34;</span><span class="p">)</span> <span class="c1"># cp949ë¡œ ê¸°ë³¸ ì¸ì½”ë”©ì„ ë°”ê¾¸ì—ˆìœ¼ë‹ˆ ê¹¨ì ¸ì•¼ í•œë‹¤.</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dt2</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ íŒ¨ì¹˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ <code>_bootlocale.getpreferredencoding</code>ë¡œ ë°”ê¾¸ì—ˆìŠµë‹ˆë‹¤.
ê²°ê³¼ëŠ” ì–´ë–¨ê¹Œìš”?</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">OS: linux
Locale: UTF-8
Patched locale: cp949
               A
0  åª›ï¿½ï¿½êµ¹ï¿½ë–ï¿½ì”ªï§ëˆì»®ï¿½ê¶—
</code></pre></td></tr></table>
</div>
</div><p>ì›í•˜ë˜ ê²°ê³¼ëŒ€ë¡œ íŒŒì¼ì˜ ë‚´ìš©ì´ ê¹¨ì§€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>
<h2 id="-pr-ë³´ë‚´ê¸°">ğŸš€ PR ë³´ë‚´ê¸°</h2>
<p>ì´ì œ ë¬¸ì œ ì›ì¸, í•´ê²°ì±…, í…ŒìŠ¤íŠ¸ê¹Œì§€ ëª¨ë‘ ì™„ì„±í–ˆìœ¼ë‹ˆ PRì„ ë³´ë‚´ë´…ì‹œë‹¤.</p>
<p><img src="../../../assets/post_images/pandas_issue.PNG" alt="issue"></p>
<p>ë¨¼ì € <a href="https://github.com/pandas-dev/pandas/issues/29565">ì´ìŠˆ</a>ë¥¼ ì‘ì„±í•´ì„œ ë²„ê·¸ë¥¼ ë°œê²¬í–ˆìŒì„ ì•Œë¦¬ê³ ,</p>
<p><img src="../../../assets/post_images/pandas_pr.PNG" alt="PR"></p>
<p>ì´ìŠˆë¥¼ ìˆ˜ì •í•˜ëŠ” <a href="https://github.com/pandas-dev/pandas/pull/29566">PR</a>ë¥¼ ê³§ë°”ë¡œ ë‚ ë ¸ìŠµë‹ˆë‹¤.</p>
<p>PandasëŠ” í…ŒìŠ¤íŠ¸ë¡œ <code>unittest</code> ëŒ€ì‹  <code>pytest</code> ì‚¬ìš©ì„ ê¶Œì¥í•´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì•½ê°„ ìˆ˜ì •í•´ì£¼ì—ˆêµ¬ìš”.</p>
<p>PRì€ ë‹¤ìŒ ë‚ ì— ê³§ë°”ë¡œ ë¨¸ì§€ë˜ì—ˆìŠµë‹ˆë‹¤ :)</p>
<p><img src="../../../assets/post_images/pandas_merge.PNG" alt="PR_merged"></p>
<h2 id="ê²°ë¡ ">ê²°ë¡ </h2>
<p>ì²˜ìŒ Pandasì—ì„œ ë²„ê·¸ë¥¼ ë°œê²¬í–ˆì„ ë•Œë§Œ í•´ë„ ì•„ì£¼ ê°„ë‹¨í•˜ê²Œ ëë‚  ì¤„ ì•Œì•˜ë˜ ë¬¸ì œê°€ ê¼¬ë¦¬ì— ê¼¬ë¦¬ë¥¼ ë¬¼ì–´ Cpythonê¹Œì§€ ê°€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì§€ê¸ˆê¹Œì§€ ëª‡ ì°¨ë¡€ì˜ ì˜¤í”ˆì†ŒìŠ¤ ì»¨íŠ¸ë¦¬ë·°ì…˜ ê²½í—˜ì€ ìˆì§€ë§Œ, Pandas ì •ë„ì˜ ëŒ€í˜• ë ˆí¬ì§€í† ë¦¬ì— ì»¨íŠ¸ë¦¬ë·°ì…˜ì„ í•œ ì ì€ ì²˜ìŒì´ì—ˆëŠ”ë°ìš”.</p>
<p>ë§ì€ ì‚¬ëŒë“¤ì´ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ì¸ë§Œí¼ ë” ì‹ ì¤‘í•˜ê²Œ ì •í™•í•œ ì›ì¸ì„ ì°¾ê¸° ìœ„í•´ ì ‘ê·¼í•´ì•¼ í–ˆê³ ,
ê·¸ ê³¼ì •ì—ì„œ Pandasë¥¼ ë„˜ì–´ CPython ì½”ë“œê¹Œì§€ ì½ì–´ë³´ê³  ë¶„ì„í•´ë³¼ ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<hr>
<h3 id="reference">Reference</h3>
<blockquote>
<p><a href="https://github.com/pandas-dev/pandas">https://github.com/pandas-dev/pandas</a></p>
</blockquote>
<blockquote>
<p><a href="https://docs.python.org/3.8/library/functions.html">https://docs.python.org/3.8/library/functions.html</a></p>
</blockquote>
<blockquote>
<p><a href="https://github.com/python/cpython">https://github.com/python/cpython</a></p>
</blockquote>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>íŒŒì´ì¬ ì¸ì½”ë”© ë¬¸ì œë¥¼ ë‹¤ë¤„ë³¸ ì‚¬ëŒì€ <code>sys.getdefaultencoding()</code>ì´ ì•„ë‹ˆê³ ? ë¼ê³  ìƒê°í•  ìˆ˜ ìˆëŠ”ë°, ì´ ë¶€ë¶„ì€ <a href="https://books.google.co.kr/books?id=NJpIDwAAQBAJ&amp;pg=PA167&amp;lpg=PA167&amp;dq=locale.getpreferredencoding(false)+or+sys.getdefaultencoding()&amp;source=bl&amp;ots=elZ_lJKRZt&amp;sig=ACfU3U2auxeyVMh-6xeCC1qVW9xQOVRh7g&amp;hl=ko&amp;sa=X&amp;ved=2ahUKEwiMlaCi297mAhXyxosBHS54DqEQ6AEwB3oECAoQAQ#v=onepage&amp;q=locale.getpreferredencoding(false)%20or%20sys.getdefaultencoding()&amp;f=false">ì—¬ê¸°</a>ì—ì„œ ì„¤ëª…ì„ ë” ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>cpythonì€ 2.x ê¹Œì§€ëŠ” íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•œ I/O í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ ì´í›„ë¶€í„° c ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì˜ íŒŒì´ì¬ êµ¬í˜„ì€ <a href="https://github.com/python/cpython/blob/master/Lib/_pyio.py">_pyio</a> ëª¨ë“ˆë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>ì‚¬ì‹¤ OSë§ˆë‹¤ ì¡°ê¸ˆì”© ë‹¤ë¥´ê²Œ ë™ì‘í•˜ë„ë¡ êµ¬í˜„ë˜ì–´ìˆì§€ë§Œ, ê¸°ë³¸ì ìœ¼ë¡œëŠ” ê±°ì˜ ë™ì¼í•©ë‹ˆë‹¤. <a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">olOwOlo</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2020-01-12
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">Python</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2020-02-06-golang-io/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Go í”„ë¡œê·¸ë˜ë° I/O ë¯¸ì„¸ íŒ</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2019-12-29-twitter-bot-without-server/">
            <span class="next-text nav-default">Github Actionsë¥¼ ì´ìš©í•˜ì—¬ ì„œë²„ ì—†ì´ ì•Œë¦¼ ë´‡ ë§Œë“¤ê¸°</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="http://localhost:1313" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="http://localhost:1313" class="iconfont icon-twitter" title="twitter"></a>
      <a href="http://localhost:1313" class="iconfont icon-facebook" title="facebook"></a>
      <a href="http://localhost:1313" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="http://localhost:1313" class="iconfont icon-google" title="google"></a>
      <a href="http://localhost:1313" class="iconfont icon-github" title="github"></a>
      <a href="http://localhost:1313" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://localhost:1313" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="http://localhost:1313" class="iconfont icon-douban" title="douban"></a>
      <a href="http://localhost:1313" class="iconfont icon-pocket" title="pocket"></a>
      <a href="http://localhost:1313" class="iconfont icon-tumblr" title="tumblr"></a>
      <a href="http://localhost:1313" class="iconfont icon-instagram" title="instagram"></a>
      <a href="http://localhost:1313" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2020<span class="heart"><i class="iconfont icon-heart"></i></span><span>olOwOlo</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c12618f9a600c40bd024996677e951e64d3487006775aeb22e200c990006c5c7.js"></script>








</body>
</html>
